"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t={TNF_EMPTY:0,TNF_WELL_KNOWN:1,TNF_MIME_MEDIA:2,TNF_ABSOLUTE_URI:3,TNF_EXTERNAL_TYPE:4,TNF_UNKNOWN:5,TNF_UNCHANGED:6,TNF_RESERVED:7,RTD_TEXT:"T",RTD_URI:"U",RTD_SMART_POSTER:"Sp",RTD_ALTERNATIVE_CARRIER:"ac",RTD_HANDOVER_CARRIER:"Hc",RTD_HANDOVER_REQUEST:"Hr",RTD_HANDOVER_SELECT:"Hs",BLOCK_SIZE:16,TLV_START:64,TL_LENGTH:4},r=function(t){var r=63&t[0];t.slice(1,1+r);return Buffer.from(t.slice(r+1)).toString()},e=function(t,r,e){return r||(r="en"),Buffer.from([r.length].concat(Array.prototype.slice.call(Buffer.from(r+t),0)))},n=["","http://www.","https://www.","http://","https://","tel:","mailto:","ftp://anonymous:anonymous@","ftp://ftp.","ftps://","sftp://","smb://","nfs://","ftp://","dav://","news:","telnet://","imap:","rtsp://","urn:","pop:","sip:","sips:","tftp:","btspp://","btl2cap://","btgoep://","tcpobex://","irdaobex://","file://","urn:epc:id:","urn:epc:tag:","urn:epc:pat:","urn:epc:raw:","urn:epc:","urn:nfc:"],o=function(t){var r=n[t[0]];return r||(r=""),r+Buffer.from(t.slice(1)).toString()},i=function(t){var r,e;return n.slice(1).forEach(function(e){r&&"urn:"!==r||0!==t.indexOf(e)||(r=e)}),r||(r=""),e=n.indexOf(r),Buffer.from([e].concat(Array.prototype.slice.call(Buffer.from(t.slice(r.length)),0)))},f=function(t){return Buffer.from(t).toString()},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.TNF_EMPTY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments[4];return n instanceof Array&&(n=Buffer.from(n).toString()),i instanceof Array||(i=Buffer.from(i)),f instanceof Array||(f=Buffer.from(f)),e==t.TNF_WELL_KNOWN&&(n==t.RTD_TEXT?c=r(f):n==t.RTD_URI&&(c=o(f))),{tnf:e,type:n,id:i,payload:f,value:c}},s=function(t){var r=[],e=void 0,n=void 0,o=void 0,i=void 0,f=void 0,c=void 0,s=void 0,p=void 0,a=void 0;for(f=0;f<t.length;f++)c=0===f,s=f===t.length-1,p=t[f].payload.length<255,a=t[f].id.length>0,e=u(c,s,!1,p,a,t[f].tnf),r.push(e),n=Array.prototype.slice.call(Buffer.from(t[f].type),0),r.push(n.length),p?(o=t[f].payload.length,r.push(o)):(o=t[f].payload.length,r.push(o>>24),r.push(o>>16),r.push(o>>8),r.push(255&o)),a&&(i=t[f].id.length,r.push(i)),r=r.concat(n),a&&(r=r.concat(t[f].id)),r=r.concat(Array.prototype.slice.call(t[f].payload,0));return r},p=function(t){return{mb:0!=(128&t),me:0!=(64&t),cf:0!=(32&t),sr:0!=(16&t),il:0!=(8&t),tnf:7&t}},u=function(t,r,e,n,o,i){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i;return t&&(f|=128),r&&(f|=64),e&&(f|=32),n&&(f|=16),o&&(f|=8),f};exports.constants=t,exports.record=c,exports.textRecord=function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c(t.TNF_WELL_KNOWN,t.RTD_TEXT,o,e(r,n))},exports.uriRecord=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c(t.TNF_WELL_KNOWN,t.RTD_URI,e,i(r))},exports.absoluteUriRecord=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c(t.TNF_ABSOLUTE_URI,r,n,e)},exports.mimeMediaRecord=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c(t.TNF_MIME_MEDIA,r,n,e)},exports.smartPoster=function(r,e,n){if(n=[],!r)throw new Error("Expecting an array of NDEF records");return n=r[0]instanceof Object&&r[0].hasOwnProperty("tnf")?s(r):r,c(t.TNF_WELL_KNOWN,t.RTD_SMART_POSTER,e,n)},exports.emptyRecord=function(){return c(t.TNF_EMPTY,[],[],[])},exports.androidApplicationRecord=function(r){return c(t.TNF_EXTERNAL_TYPE,"android.com:pkg",[],r)},exports.encodeMessage=s,exports.decodeMessage=function(t){for(var r=t.slice(0),e=[],n=void 0,o=void 0,i=0,f=0,s=0,u=[],a=[],T=[];r.length&&(n=r.shift(),o=p(n),i=r.shift(),f=o.sr?r.shift():(255&r.shift())<<24|(255&r.shift())<<16|(255&r.shift())<<8|255&r.shift(),o.il&&(s=r.shift()),u=r.splice(0,i),a=r.splice(0,s),T=r.splice(0,f),e.push(c(o.tnf,u,a,T)),!o.me););return e},exports.decodeTnf=p,exports.encodeTnf=u,exports.isType=function(t,r,e){return t.tnf===r&&f(t)===f(e)};
//# sourceMappingURL=index.min.js.map
